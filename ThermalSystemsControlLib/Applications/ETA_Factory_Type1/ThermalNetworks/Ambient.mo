within ThermalSystemsControlLib.Applications.ETA_Factory_Type1.ThermalNetworks;
model Ambient
    extends ThermalSystemsControlLib.BaseClasses.Icons.Systems_Icon;
  Interfaces.ambientState_FMUConnector localState annotation (Placement(transformation(
        extent={{-10,-10},{10,10}},
        rotation=180,
        origin={-90,90})));
  output Interfaces.ambientState ambientState annotation (Placement(transformation(extent={{-120,-10},{-100,10}})));
  Modelica.Blocks.Sources.BooleanStep bRain(startTime=172800) annotation (Placement(transformation(
        extent={{-10,-10},{10,10}},
        rotation=180,
        origin={90,-50})));
  Modelica.Blocks.Math.ContinuousMean mean(t_eps=6*3600) annotation (Placement(transformation(extent={{20,0},{0,20}})));
  Modelica.Blocks.Sources.CombiTimeTable
                                      combiTimeTable2(table=[0,-10; 900,-10; 1800,-10; 2700,-10; 3600,-10; 4500,-10; 5400,-10; 6300,-10; 7200,-10; 8100,-10; 9000,-10; 9900,-10; 10800,-15; 11700,-15; 12600,-15; 13500,-15; 14400,-15; 15300,-15; 16200,-15; 17100,-15; 18000,-10; 18900,-10; 19800,-10; 20700,-10; 21600,-10; 22500,-10; 23400,-10; 24300,-10; 25200,-10; 26100,-10; 27000,-10; 27900,-10; 28800,-5; 29700,-5; 30600,-5; 31500,-5; 32400,-5; 33300,-5; 34200,-5; 35100,-5; 36000,0; 36900,0; 37800,
        0; 38700,0; 39600,0; 40500,0; 41400,0; 42300,0; 43200,0; 44100,0; 45000,0; 45900,0; 46800,0; 47700,0; 48600,0; 49500,0; 50400,0; 51300,0; 52200,0; 53100,0; 54000,0; 54900,0; 55800,0; 56700,0; 57600,-5; 58500,-5; 59400,-5; 60300,-5; 61200,-5; 62100,-5; 63000,-5; 63900,-5; 64800,-5; 65700,-5; 66600,-5; 67500,-5; 68400,-5; 69300,-5; 70200,-5; 71100,-5; 72000,-10; 72900,-10; 73800,-10; 74700,-10; 75600,-10; 76500,-10; 77400,-10; 78300,-10; 79200,-10; 80100,-10; 81000,-10; 81900,-10; 82800,-10;
        83700,-10; 84600,-10; 85500,-10; 86400,-10; 87300,-10; 88200,-10; 89100,-10; 90000,-10; 90900,-10; 91800,-10; 92700,-10; 93600,-10; 94500,-10; 95400,-10; 96300,-10; 97200,-15; 98100,-15; 99000,-15; 99900,-15; 100800,-15; 101700,-15; 102600,-15; 103500,-15; 104400,-10; 105300,-10; 106200,-10; 107100,-10; 108000,-10; 108900,-10; 109800,-10; 110700,-10; 111600,-10; 112500,-10; 113400,-10; 114300,-10; 115200,-5; 116100,-5; 117000,-5; 117900,-5; 118800,-5; 119700,-5; 120600,-5; 121500,-5; 122400,
        0; 123300,0; 124200,0; 125100,0; 126000,0; 126900,0; 127800,0; 128700,0; 129600,0; 130500,0; 131400,0; 132300,0; 133200,0; 134100,0; 135000,0; 135900,0; 136800,0; 137700,0; 138600,0; 139500,0; 140400,0; 141300,0; 142200,0; 143100,0; 144000,-5; 144900,-5; 145800,-5; 146700,-5; 147600,-5; 148500,-5; 149400,-5; 150300,-5; 151200,-5; 152100,-5; 153000,-5; 153900,-5; 154800,-5; 155700,-5; 156600,-5; 157500,-5; 158400,-10; 159300,-10; 160200,-10; 161100,-10; 162000,-10; 162900,-10; 163800,-10;
        164700,-10; 165600,-10; 166500,-10; 167400,-10; 168300,-10; 169200,-10; 170100,-10; 171000,-10; 171900,-10; 172800,-10; 173700,-10; 174600,-10; 175500,-10; 176400,-10; 177300,-10; 178200,-10; 179100,-10; 180000,-10; 180900,-10; 181800,-10; 182700,-10; 183600,-15; 184500,-15; 185400,-15; 186300,-15; 187200,-15; 188100,-15; 189000,-15; 189900,-15; 190800,-10; 191700,-10; 192600,-10; 193500,-10; 194400,-10; 195300,-10; 196200,-10; 197100,-10; 198000,-10; 198900,-10; 199800,-10; 200700,-10;
        201600,-5; 202500,-5; 203400,-5; 204300,-5; 205200,-5; 206100,-5; 207000,-5; 207900,-5; 208800,0; 209700,0; 210600,0; 211500,0; 212400,0; 213300,0; 214200,0; 215100,0; 216000,0; 216900,0; 217800,0; 218700,0; 219600,0; 220500,0; 221400,0; 222300,0; 223200,0; 224100,0; 225000,0; 225900,0; 226800,0; 227700,0; 228600,0; 229500,0; 230400,-5; 231300,-5; 232200,-5; 233100,-5; 234000,-5; 234900,-5; 235800,-5; 236700,-5; 237600,-5; 238500,-5; 239400,-5; 240300,-5; 241200,-5; 242100,-5; 243000,-5;
        243900,-5; 244800,-10; 245700,-10; 246600,-10; 247500,-10; 248400,-10; 249300,-10; 250200,-10; 251100,-10; 252000,-10; 252900,-10; 253800,-10; 254700,-10; 255600,-10; 256500,-10; 257400,-10; 258300,-10; 259200,-10; 260100,-10; 261000,-10; 261900,-10; 262800,-10; 263700,-10; 264600,-10; 265500,-10; 266400,-10; 267300,-10; 268200,-10; 269100,-10; 270000,-15; 270900,-15; 271800,-15; 272700,-15; 273600,-15; 274500,-15; 275400,-15; 276300,-15; 277200,-10; 278100,-10; 279000,-10; 279900,-10; 280800,
        -10; 281700,-10; 282600,-10; 283500,-10; 284400,-10; 285300,-10; 286200,-10; 287100,-10; 288000,-5; 288900,-5; 289800,-5; 290700,-5; 291600,-5; 292500,-5; 293400,-5; 294300,-5; 295200,0; 296100,0; 297000,0; 297900,0; 298800,0; 299700,0; 300600,0; 301500,0; 302400,0; 303300,0; 304200,0; 305100,0; 306000,0; 306900,0; 307800,0; 308700,0; 309600,0; 310500,0; 311400,0; 312300,0; 313200,0; 314100,0; 315000,0; 315900,0; 316800,-5; 317700,-5; 318600,-5; 319500,-5; 320400,-5; 321300,-5; 322200,-5;
        323100,-5; 324000,-5; 324900,-5; 325800,-5; 326700,-5; 327600,-5; 328500,-5; 329400,-5; 330300,-5; 331200,-10; 332100,-10; 333000,-10; 333900,-10; 334800,-10; 335700,-10; 336600,-10; 337500,-10; 338400,-10; 339300,-10; 340200,-10; 341100,-10; 342000,-10; 342900,-10; 343800,-10; 344700,-10; 345600,-10; 346500,-10; 347400,-10; 348300,-10; 349200,-10; 350100,-10; 351000,-10; 351900,-10; 352800,-10; 353700,-10; 354600,-10; 355500,-10; 356400,-15; 357300,-15; 358200,-15; 359100,-15; 360000,-15;
        360900,-15; 361800,-15; 362700,-15; 363600,-10; 364500,-10; 365400,-10; 366300,-10; 367200,-10; 368100,-10; 369000,-10; 369900,-10; 370800,-10; 371700,-10; 372600,-10; 373500,-10; 374400,-5; 375300,-5; 376200,-5; 377100,-5; 378000,-5; 378900,-5; 379800,-5; 380700,-5; 381600,0; 382500,0; 383400,0; 384300,0; 385200,0; 386100,0; 387000,0; 387900,0; 388800,0; 389700,0; 390600,0; 391500,0; 392400,0; 393300,0; 394200,0; 395100,0; 396000,0; 396900,0; 397800,0; 398700,0; 399600,0; 400500,0; 401400,
        0; 402300,0; 403200,-5; 404100,-5; 405000,-5; 405900,-5; 406800,-5; 407700,-5; 408600,-5; 409500,-5; 410400,-5; 411300,-5; 412200,-5; 413100,-5; 414000,-5; 414900,-5; 415800,-5; 416700,-5; 417600,-10; 418500,-10; 419400,-10; 420300,-10; 421200,-10; 422100,-10; 423000,-10; 423900,-10; 424800,-10; 425700,-10; 426600,-10; 427500,-10; 428400,-10; 429300,-10; 430200,-10; 431100,-10; 432000,-10; 432900,-10; 433800,-10; 434700,-10; 435600,-10; 436500,-10; 437400,-10; 438300,-10; 439200,-10; 440100,
        -10; 441000,-10; 441900,-10; 442800,-15; 443700,-15; 444600,-15; 445500,-15; 446400,-15; 447300,-15; 448200,-15; 449100,-15; 450000,-10; 450900,-10; 451800,-10; 452700,-10; 453600,-10; 454500,-10; 455400,-10; 456300,-10; 457200,-10; 458100,-10; 459000,-10; 459900,-10; 460800,-5; 461700,-5; 462600,-5; 463500,-5; 464400,-5; 465300,-5; 466200,-5; 467100,-5; 468000,0; 468900,0; 469800,0; 470700,0; 471600,0; 472500,0; 473400,0; 474300,0; 475200,0; 476100,0; 477000,0; 477900,0; 478800,0; 479700,
        0; 480600,0; 481500,0; 482400,0; 483300,0; 484200,0; 485100,0; 486000,0; 486900,0; 487800,0; 488700,0; 489600,-5; 490500,-5; 491400,-5; 492300,-5; 493200,-5; 494100,-5; 495000,-5; 495900,-5; 496800,-5; 497700,-5; 498600,-5; 499500,-5; 500400,-5; 501300,-5; 502200,-5; 503100,-5; 504000,-10; 504900,-10; 505800,-10; 506700,-10; 507600,-10; 508500,-10; 509400,-10; 510300,-10; 511200,-10; 512100,-10; 513000,-10; 513900,-10; 514800,-10; 515700,-10; 516600,-10; 517500,-10; 518400,-10; 519300,-10;
        520200,-10; 521100,-10; 522000,-10; 522900,-10; 523800,-10; 524700,-10; 525600,-10; 526500,-10; 527400,-10; 528300,-10; 529200,-15; 530100,-15; 531000,-15; 531900,-15; 532800,-15; 533700,-15; 534600,-15; 535500,-15; 536400,-10; 537300,-10; 538200,-10; 539100,-10; 540000,-10; 540900,-10; 541800,-10; 542700,-10; 543600,-10; 544500,-10; 545400,-10; 546300,-10; 547200,-5; 548100,-5; 549000,-5; 549900,-5; 550800,-5; 551700,-5; 552600,-5; 553500,-5; 554400,0; 555300,0; 556200,0; 557100,0; 558000,
        0; 558900,0; 559800,0; 560700,0; 561600,0; 562500,0; 563400,0; 564300,0; 565200,0; 566100,0; 567000,0; 567900,0; 568800,0; 569700,0; 570600,0; 571500,0; 572400,0; 573300,0; 574200,0; 575100,0; 576000,-5; 576900,-5; 577800,-5; 578700,-5; 579600,-5; 580500,-5; 581400,-5; 582300,-5; 583200,-5; 584100,-5; 585000,-5; 585900,-5; 586800,-5; 587700,-5; 588600,-5; 589500,-5; 590400,-10; 591300,-10; 592200,-10; 593100,-10; 594000,-10; 594900,-10; 595800,-10; 596700,-10; 597600,-10; 598500,-10; 599400,
        -10; 600300,-10; 601200,-10; 602100,-10; 603000,-10; 603900,-10])
                                                                         annotation (Placement(transformation(extent={{100,0},{80,20}})));
  Modelica.Blocks.Math.Add add annotation (Placement(transformation(
        extent={{-10,-10},{10,10}},
        rotation=180,
        origin={50,10})));
  Modelica.Blocks.Sources.Constant const(k=273.15) annotation (Placement(transformation(extent={{100,40},{80,60}})));
equation

  ambientState.bRain = bRain.y;
  ambientState.fOutsideTemperature = add.y;
  ambientState.fOutsideTemperature_Mean = mean.y;
  connect(ambientState, localState.ambientState1) annotation (Line(points={{-110,0},{-79,0},{-79,90}}, color={0,0,0}));
  connect(mean.u, add.y) annotation (Line(points={{22,10},{39,10}}, color={0,0,127}));
  connect(add.u1, combiTimeTable2.y[1]) annotation (Line(points={{62,4},{72,4},{72,10},{79,10}}, color={0,0,127}));
  connect(add.u2, const.y) annotation (Line(points={{62,16},{62,50},{79,50}}, color={0,0,127}));
  annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(coordinateSystem(preserveAspectRatio=false)));
end Ambient;
