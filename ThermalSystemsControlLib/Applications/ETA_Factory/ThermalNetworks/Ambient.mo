within ThermalSystemsControlLib.Applications.ETA_Factory.ThermalNetworks;
model Ambient
    extends ThermalSystemsControlLib.BaseClasses.Icons.Systems_Icon;
  Interfaces.ambientState_FMUConnector localState annotation (Placement(transformation(
        extent={{-10,-10},{10,10}},
        rotation=180,
        origin={-90,90})));
  Interfaces.ambientState ambientState annotation (Placement(transformation(extent={{-120,-10},{-100,10}})));
  Modelica.Blocks.Math.ContinuousMean mean(t_eps=6*3600) annotation (Placement(transformation(extent={{20,0},{0,20}})));
  Modelica.Blocks.Sources.CombiTimeTable
                                      combiTimeTable2(
    table=[0,11; 900,11; 1800,11; 2700,11; 3600,10.9; 4500,10.9; 5400,10.9; 6300,10.9; 7200,10.8; 8100,10.8; 9000,10.8; 9900,10.8; 10800,10.7; 11700,10.7; 12600,10.7; 13500,10.7; 14400,10.5; 15300,10.5; 16200,10.5; 17100,10.5; 18000,10.6; 18900,10.6; 19800,10.6; 20700,10.6; 21600,10.5; 22500,10.5; 23400,10.5; 24300,10.5; 25200,10.1; 26100,10.1; 27000,10.1; 27900,10.1; 28800,10.1; 29700,10.1; 30600,10.1; 31500,10.1; 32400,10.4; 33300,10.4; 34200,10.4; 35100,10.4; 36000,10.6; 36900,10.6; 37800,
        10.6; 38700,10.6; 39600,10.9; 40500,10.9; 41400,10.9; 42300,10.9; 43200,11.5; 44100,11.5; 45000,11.5; 45900,11.5; 46800,12; 47700,12; 48600,12; 49500,12; 50400,11.8; 51300,11.8; 52200,11.8; 53100,11.8; 54000,10.7; 54900,10.7; 55800,10.7; 56700,10.7; 57600,7.9; 58500,7.9; 59400,7.9; 60300,7.9; 61200,6.3; 62100,6.3; 63000,6.3; 63900,6.3; 64800,5.6; 65700,5.6; 66600,5.6; 67500,5.6; 68400,5.5; 69300,5.5; 70200,5.5; 71100,5.5; 72000,4.5; 72900,4.5; 73800,4.5; 74700,4.5; 75600,4.4; 76500,4.4;
        77400,4.4; 78300,4.4; 79200,3.5; 80100,3.5; 81000,3.5; 81900,3.5; 82800,3; 83700,3; 84600,3; 85500,3; 86400,3.1; 87300,3.1; 88200,3.1; 89100,3.1; 90000,3.3; 90900,3.3; 91800,3.3; 92700,3.3; 93600,1.8; 94500,1.8; 95400,1.8; 96300,1.8; 97200,3; 98100,3; 99000,3; 99900,3; 100800,3; 101700,3; 102600,3; 103500,3; 104400,3.3; 105300,3.3; 106200,3.3; 107100,3.3; 108000,3.9; 108900,3.9; 109800,3.9; 110700,3.9; 111600,3.5; 112500,3.5; 113400,3.5; 114300,3.5; 115200,3.7; 116100,3.7; 117000,3.7;
        117900,3.7; 118800,5; 119700,5; 120600,5; 121500,5; 122400,7.7; 123300,7.7; 124200,7.7; 125100,7.7; 126000,8.7; 126900,8.7; 127800,8.7; 128700,8.7; 129600,9.7; 130500,9.7; 131400,9.7; 132300,9.7; 133200,9.8; 134100,9.8; 135000,9.8; 135900,9.8; 136800,10.3; 137700,10.3; 138600,10.3; 139500,10.3; 140400,10.9; 141300,10.9; 142200,10.9; 143100,10.9; 144000,10.8; 144900,10.8; 145800,10.8; 146700,10.8; 147600,11.1; 148500,11.1; 149400,11.1; 150300,11.1; 151200,11.3; 152100,11.3; 153000,11.3;
        153900,11.3; 154800,11.3; 155700,11.3; 156600,11.3; 157500,11.3; 158400,11.6; 159300,11.6; 160200,11.6; 161100,11.6; 162000,11.8; 162900,11.8; 163800,11.8; 164700,11.8; 165600,11.9; 166500,11.9; 167400,11.9; 168300,11.9; 169200,11.8; 170100,11.8; 171000,11.8; 171900,11.8; 172800,10.7; 173700,10.7; 174600,10.7; 175500,10.7; 176400,9.2; 177300,9.2; 178200,9.2; 179100,9.2; 180000,8.3; 180900,8.3; 181800,8.3; 182700,8.3; 183600,7.5; 184500,7.5; 185400,7.5; 186300,7.5; 187200,8.2; 188100,8.2;
        189000,8.2; 189900,8.2; 190800,8.1; 191700,8.1; 192600,8.1; 193500,8.1; 194400,7.8; 195300,7.8; 196200,7.8; 197100,7.8; 198000,7.4; 198900,7.4; 199800,7.4; 200700,7.4; 201600,7.4; 202500,7.4; 203400,7.4; 204300,7.4; 205200,8.6; 206100,8.6; 207000,8.6; 207900,8.6; 208800,9.2; 209700,9.2; 210600,9.2; 211500,9.2; 212400,9.6; 213300,9.6; 214200,9.6; 215100,9.6; 216000,10.3; 216900,10.3; 217800,10.3; 218700,10.3; 219600,10.8; 220500,10.8; 221400,10.8; 222300,10.8; 223200,10.6; 224100,10.6;
        225000,10.6; 225900,10.6; 226800,10.3; 227700,10.3; 228600,10.3; 229500,10.3; 230400,10.4; 231300,10.4; 232200,10.4; 233100,10.4; 234000,9.9; 234900,9.9; 235800,9.9; 236700,9.9; 237600,9.6; 238500,9.6; 239400,9.6; 240300,9.6; 241200,9.8; 242100,9.8; 243000,9.8; 243900,9.8; 244800,9.8; 245700,9.8; 246600,9.8; 247500,9.8; 248400,9.3; 249300,9.3; 250200,9.3; 251100,9.3; 252000,8.7; 252900,8.7; 253800,8.7; 254700,8.7; 255600,8.6; 256500,8.6; 257400,8.6; 258300,8.6; 259200,8.6; 260100,8.6;
        261000,8.6; 261900,8.6; 262800,8.8; 263700,8.8; 264600,8.8; 265500,8.8; 266400,9.3; 267300,9.3; 268200,9.3; 269100,9.3; 270000,9.7; 270900,9.7; 271800,9.7; 272700,9.7; 273600,9.5; 274500,9.5; 275400,9.5; 276300,9.5; 277200,9.5; 278100,9.5; 279000,9.5; 279900,9.5; 280800,9.5; 281700,9.5; 282600,9.5; 283500,9.5; 284400,9.4; 285300,9.4; 286200,9.4; 287100,9.4; 288000,9.6; 288900,9.6; 289800,9.6; 290700,9.6; 291600,8.9; 292500,8.9; 293400,8.9; 294300,8.9; 295200,6.9; 296100,6.9; 297000,6.9;
        297900,6.9; 298800,6.7; 299700,6.7; 300600,6.7; 301500,6.7; 302400,6.5; 303300,6.5; 304200,6.5; 305100,6.5; 306000,6.1; 306900,6.1; 307800,6.1; 308700,6.1; 309600,5.8; 310500,5.8; 311400,5.8; 312300,5.8; 313200,5.8; 314100,5.8; 315000,5.8; 315900,5.8; 316800,5.7; 317700,5.7; 318600,5.7; 319500,5.7; 320400,5.6; 321300,5.6; 322200,5.6; 323100,5.6; 324000,5.5; 324900,5.5; 325800,5.5; 326700,5.5; 327600,5.5; 328500,5.5; 329400,5.5; 330300,5.5; 331200,5.5; 332100,5.5; 333000,5.5; 333900,5.5;
        334800,5.7; 335700,5.7; 336600,5.7; 337500,5.7; 338400,5.5; 339300,5.5; 340200,5.5; 341100,5.5; 342000,5.5; 342900,5.5; 343800,5.5; 344700,5.5; 345600,5.4; 346500,5.4; 347400,5.4; 348300,5.4; 349200,5.4; 350100,5.4; 351000,5.4; 351900,5.4; 352800,5.4; 353700,5.4; 354600,5.4; 355500,5.4; 356400,5.4; 357300,5.4; 358200,5.4; 359100,5.4; 360000,2.8; 360900,2.8; 361800,2.8; 362700,2.8; 363600,2.4; 364500,2.4; 365400,2.4; 366300,2.4; 367200,2.5; 368100,2.5; 369000,2.5; 369900,2.5; 370800,2.1;
        371700,2.1; 372600,2.1; 373500,2.1; 374400,1; 375300,1; 376200,1; 377100,1; 378000,1.5; 378900,1.5; 379800,1.5; 380700,1.5; 381600,2.7; 382500,2.7; 383400,2.7; 384300,2.7; 385200,3.1; 386100,3.1; 387000,3.1; 387900,3.1; 388800,3.1; 389700,3.1; 390600,3.1; 391500,3.1; 392400,3.1; 393300,3.1; 394200,3.1; 395100,3.1; 396000,3.1; 396900,3.1; 397800,3.1; 398700,3.1; 399600,2.9; 400500,2.9; 401400,2.9; 402300,2.9; 403200,2.7; 404100,2.7; 405000,2.7; 405900,2.7; 406800,2.7; 407700,2.7; 408600,
        2.7; 409500,2.7; 410400,2.8; 411300,2.8; 412200,2.8; 413100,2.8; 414000,3; 414900,3; 415800,3; 416700,3; 417600,3; 418500,3; 419400,3; 420300,3; 421200,3.1; 422100,3.1; 423000,3.1; 423900,3.1; 424800,3.3; 425700,3.3; 426600,3.3; 427500,3.3; 428400,3.6; 429300,3.6; 430200,3.6; 431100,3.6; 432000,3.3; 432900,3.3; 433800,3.3; 434700,3.3; 435600,3.3; 436500,3.3; 437400,3.3; 438300,3.3; 439200,2.9; 440100,2.9; 441000,2.9; 441900,2.9; 442800,1.7; 443700,1.7; 444600,1.7; 445500,1.7; 446400,2;
        447300,2; 448200,2; 449100,2; 450000,1.8; 450900,1.8; 451800,1.8; 452700,1.8; 453600,1.1; 454500,1.1; 455400,1.1; 456300,1.1; 457200,1.2; 458100,1.2; 459000,1.2; 459900,1.2; 460800,1.9; 461700,1.9; 462600,1.9; 463500,1.9; 464400,2.5; 465300,2.5; 466200,2.5; 467100,2.5; 468000,3.7; 468900,3.7; 469800,3.7; 470700,3.7; 471600,4.7; 472500,4.7; 473400,4.7; 474300,4.7; 475200,4.2; 476100,4.2; 477000,4.2; 477900,4.2; 478800,5.4; 479700,5.4; 480600,5.4; 481500,5.4; 482400,4.6; 483300,4.6;
        484200,4.6; 485100,4.6; 486000,3.8; 486900,3.8; 487800,3.8; 488700,3.8; 489600,1; 490500,1; 491400,1; 492300,1; 493200,-1.2; 494100,-1.2; 495000,-1.2; 495900,-1.2; 496800,-1.8; 497700,-1.8; 498600,-1.8; 499500,-1.8; 500400,-2.3; 501300,-2.3; 502200,-2.3; 503100,-2.3; 504000,-2.4; 504900,-2.4; 505800,-2.4; 506700,-2.4; 507600,-2.7; 508500,-2.7; 509400,-2.7; 510300,-2.7; 511200,-0.5; 512100,-0.5; 513000,-0.5; 513900,-0.5; 514800,-0.1; 515700,-0.1; 516600,-0.1; 517500,-0.1; 518400,0.2;
        519300,0.2; 520200,0.2; 521100,0.2; 522000,-0.3; 522900,-0.3; 523800,-0.3; 524700,-0.3; 525600,0.6; 526500,0.6; 527400,0.6; 528300,0.6; 529200,0.6; 530100,0.6; 531000,0.6; 531900,0.6; 532800,0.8; 533700,0.8; 534600,0.8; 535500,0.8; 536400,1; 537300,1; 538200,1; 539100,1; 540000,0.9; 540900,0.9; 541800,0.9; 542700,0.9; 543600,1; 544500,1; 545400,1; 546300,1; 547200,1; 548100,1; 549000,1; 549900,1; 550800,0.6; 551700,0.6; 552600,0.6; 553500,0.6; 554400,0.7; 555300,0.7; 556200,0.7; 557100,
        0.7; 558000,1.1; 558900,1.1; 559800,1.1; 560700,1.1; 561600,1.5; 562500,1.5; 563400,1.5; 564300,1.5; 565200,1.8; 566100,1.8; 567000,1.8; 567900,1.8; 568800,1.8; 569700,1.8; 570600,1.8; 571500,1.8; 572400,1.8; 573300,1.8; 574200,1.8; 575100,1.8; 576000,1.9; 576900,1.9; 577800,1.9; 578700,1.9; 579600,1.8; 580500,1.8; 581400,1.8; 582300,1.8; 583200,2; 584100,2; 585000,2; 585900,2; 586800,2.2; 587700,2.2; 588600,2.2; 589500,2.2; 590400,2; 591300,2; 592200,2; 593100,2; 594000,2.1; 594900,2.1;
        595800,2.1; 596700,2.1; 597600,2.1; 598500,2.1; 599400,2.1; 600300,2.1; 601200,2.5; 602100,2.5; 603000,2.5; 603900,2.5],
    smoothness=Modelica.Blocks.Types.Smoothness.LinearSegments,
    extrapolation=Modelica.Blocks.Types.Extrapolation.HoldLastPoint)     annotation (Placement(transformation(extent={{100,0},{80,20}})));
  Modelica.Blocks.Math.Add add annotation (Placement(transformation(
        extent={{-10,-10},{10,10}},
        rotation=180,
        origin={50,10})));
  Modelica.Blocks.Sources.Constant const(k=273.15) annotation (Placement(transformation(extent={{100,40},{80,60}})));
equation

  ambientState.bRain = false;
  ambientState.fOutsideTemperature = add.y;
  ambientState.fOutsideTemperature_Mean = mean.y;
  connect(ambientState, localState.ambientState1) annotation (Line(points={{-110,0},{-79,0},{-79,90}}, color={0,0,0}));
  connect(mean.u, add.y) annotation (Line(points={{22,10},{39,10}}, color={0,0,127}));
  connect(add.u1, combiTimeTable2.y[1]) annotation (Line(points={{62,4},{72,4},{72,10},{79,10}}, color={0,0,127}));
  connect(add.u2, const.y) annotation (Line(points={{62,16},{62,50},{79,50}}, color={0,0,127}));
  annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(coordinateSystem(preserveAspectRatio=false)));
end Ambient;
